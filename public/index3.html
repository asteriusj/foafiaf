<!doctype html>
<html>
<head>
	<title>Map of FOAF relationships</title>
	<script type="text/javascript" src="dist/vis.js"></script>
	<link href="dist/vis.css" rel="stylesheet" type="text/css">
   
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<body>

<main>
	<section id="canvasArea">
		<div id="selectedContainer"></div>
		
		<div id = "mynetwork" class="vis-network" tabindex="900" style="position: relative; overflow: hidden; touch-action: pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;">
			<canvas width="800" height="600" style="position: relative; touch-action: none; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;"></canvas>
			<div class="vis-network-tooltip" style="left: 569px; top: 212px; visibility: hidden;">foaf:Person: Dannette Holifield</div>
		</div>

		<div id="logo"></div>
	</section>
	<aside id="detailsArea">
		<section id="generalDetails">
			<h1 id="title">Map of FOAF relationships</h1>
			<span><a id="about" href="https://github.com/asteriusj/foafiaf" target="_blank">https://github.com/asteriusj/foafiaf</a></span>
			<h5>Version: <span id="version">0.0.1</span></h5>
			<h5>Author(s): <span id="authors">TR Technology Team</span></h5>
			<h5 class="statisticDetails">Nodes: <span id="nodeCount"></span></h5>
			<h5 class="statisticDetails">Edges: <span id="edgeCount"></span></h5>

			<h3 class="accordion-trigger accordion-trigger-active" id="selection-details-trigger">Details</h3>
			<div class="accordion-container" id="selection-details">
				<div id="SelectionInformation">
					<p class="propDetails"><span id="propDetails">Select a node or edge in the graph.</span></p>
					<p id='separation' hidden>Degrees of Separation: 2</p>
					<p><input type='range' id='degreesOfSelectedNode' class='slideOption' hidden min='0' max='6' value='2' step='1' onchange='changeDegrees(this.value)'/></p>
				</div>
			</div>			
			<h3 class="accordion-trigger">Filters</h3>	
			<div id="filterOption" class="accordion-container filter hidden">
				<!--<p><input type='range' id='degreesFilter' class='slideOption' hidden min='0' max='6' value='2' step='1' onchange='changeDegrees(this.value)'/></p>-->
			</div>			
		</section>
	</aside>
</main>

<script type="text/javascript">
  // create an array with nodes
  var nodes = new vis.DataSet([{"typeOf":"skos:ConceptScheme","id":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","label":"OUR SHARED VALUES","title":"skos:ConceptScheme https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values OUR SHARED VALUES","group":"cubes"},{"typeOf":"skos:Concept","id":"value:01","label":"Inclusion","title":"skos:Concept value:01 Inclusion","group":"tag"},{"typeOf":"skos:Concept","id":"value:02","label":"Caring","title":"skos:Concept value:02 Caring","group":"tag"},{"typeOf":"skos:Concept","id":"value:03","label":"Respect","title":"skos:Concept value:03 Respect","group":"tag"},{"typeOf":"skos:Concept","id":"value:04","label":"Transparency","title":"skos:Concept value:04 Transparency","group":"tag"},{"typeOf":"skos:Concept","id":"value:05","label":"Trustworthiness","title":"skos:Concept value:05 Trustworthiness","group":"tag"},{"typeOf":"skos:Concept","id":"value:06","label":"Unity","title":"skos:Concept value:06 Unity","group":"tag"},{"typeOf":"skos:Concept","id":"value:07","label":"Ideation","title":"skos:Concept value:07 Ideation","group":"tag"},{"typeOf":"skos:Concept","id":"value:08","label":"Responsibility","title":"skos:Concept value:08 Responsibility","group":"tag"},{"typeOf":"skos:Concept","id":"value:09","label":"Interconnectedness","title":"skos:Concept value:09 Interconnectedness","group":"tag"},{"typeOf":"skos:ConceptScheme","id":"spoke:0","label":null,"title":"skos:ConceptScheme spoke:0 undefined","group":"cubes"},{"typeOf":"skos:Concept","id":"spoke:01","label":"Funding Our Future","title":"skos:Concept spoke:01 Funding Our Future","group":"tag"},{"typeOf":"skos:Concept","id":"spoke:02","label":"Reframing a 21st Century Community","title":"skos:Concept spoke:02 Reframing a 21st Century Community","group":"tag"},{"typeOf":"skos:Concept","id":"spoke:03","label":"Renewal","title":"skos:Concept spoke:03 Renewal","group":"tag"},{"typeOf":"skos:Concept","id":"spoke:04","label":"Revitalization","title":"skos:Concept spoke:04 Revitalization","group":"tag"},{"typeOf":"skos:Concept","id":"spoke:05","label":"Sense of Place","title":"skos:Concept spoke:05 Sense of Place","group":"tag"},{"typeOf":"skos:ConceptScheme","id":"segment:0","label":null,"title":"skos:ConceptScheme segment:0 undefined","group":"cubes"},{"typeOf":"skos:Concept","id":"_Segment_HealthyLifestyles","label":"Healthy Lifestyles","title":"skos:Concept _Segment_HealthyLifestyles Healthy Lifestyles","group":"tag"},{"typeOf":"skos:ConceptScheme","id":"strategy:0","label":null,"title":"skos:ConceptScheme strategy:0 undefined","group":"cubes"},{"typeOf":"skos:Concept","id":"_Strategy_EatforHealth","label":"Eat for Health Objective","title":"skos:Concept _Strategy_EatforHealth Eat for Health Objective","group":"tag"},{"typeOf":"skos:Concept","id":"_Strategy_MoveMore","label":"Move More Objective","title":"skos:Concept _Strategy_MoveMore Move More Objective","group":"tag"},{"typeOf":"skos:Concept","id":"_Strategy_LoveandBeLoved","label":"Love and Be Loved Objective","title":"skos:Concept _Strategy_LoveandBeLoved Love and Be Loved Objective","group":"tag"}]);

  // create an array with edges
  var edges = new vis.DataSet([{"from":"","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:01","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:02","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:03","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:04","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:05","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:06","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:07","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:08","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"https://foafiaf-asteriusj.c9users.io/owl/foafiaf#Values","to":"value:09","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"value:01","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:01","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:02","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:02","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:03","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:03","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:04","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:04","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:05","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:05","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:06","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:06","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:07","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:07","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:08","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:08","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:09","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"value:09","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:0","to":"spoke:01","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"spoke:0","to":"spoke:02","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"spoke:0","to":"spoke:03","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"spoke:0","to":"spoke:04","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"spoke:0","to":"spoke:05","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"spoke:01","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:01","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:01","to":"spoke:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"spoke:02","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:02","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:02","to":"spoke:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"spoke:03","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:03","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:03","to":"spoke:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"spoke:04","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:04","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:04","to":"spoke:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"spoke:05","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:05","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"spoke:05","to":"spoke:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"segment:0","to":"segment:01","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:02","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:03","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:04","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"_Segment_HealthyLifestyles","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:05","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:06","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:07","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:08","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:09","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:10","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:11","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:12","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:13","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"segment:0","to":"segment:14","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"_Segment_HealthyLifestyles","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Segment_HealthyLifestyles","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Segment_HealthyLifestyles","to":"segment:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Segment_HealthyLifestyles","to":"spoke:03","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"strategy:0","to":"_Strategy_EatforHealth","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"strategy:0","to":"_Strategy_MoveMore","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"strategy:0","to":"_Strategy_LoveandBeLoved","arrows":{"to":"true"},"label":" < skos:HasTopConcept >"},{"from":"_Strategy_EatforHealth","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_EatforHealth","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_EatforHealth","to":"strategy:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Strategy_EatforHealth","to":"_Segment_HealthyLifestyles","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Strategy_MoveMore","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_MoveMore","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_MoveMore","to":"strategy:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Strategy_MoveMore","to":"_Segment_HealthyLifestyles","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Strategy_LoveandBeLoved","to":"sioc:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_LoveandBeLoved","to":"foaf:topic","arrows":{"to":"true"},"label":" < rdf:type >"},{"from":"_Strategy_LoveandBeLoved","to":"strategy:0","arrows":{"to":"true"},"label":" < skos:broader >"},{"from":"_Strategy_LoveandBeLoved","to":"_Segment_HealthyLifestyles","arrows":{"to":"true"},"label":" < skos:broader >"}]);
</script>

<script type="text/javascript">
	// create a network
	var container = document.getElementById('mynetwork');
	var data = {
		nodes: nodes,
		edges: edges
	};
	var options = {

		layout: {
			randomSeed: 10,
			improvedLayout:false
		},


		physics: {
		  solver: 'forceAtlas2Based',
		  maxVelocity: 10,
		  minVelocity: 1,
		},


		groups: {
		  property: {
			shape: 
			  'dot'
			,
			size: 18,
			color: 'pink'
		  },
		  
		  group: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf0c0',
			  size: 50,
			  color: '#57169a'
			}
		  },
		  
		  team: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf007',
			  size: 50,
			  color: 'grey'
			}
		  },
		  person: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf007',
			  size: 50,
			  color: '#aa00ff'
			}
		  },
		  
		  role: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf21d',
			  size: 50,
			  color: '#6E6EFD'
			}
		  },


		  organization: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf0e8',
			  size: 50,
			  color: 'blue'
			}
		  },   
		  orgbiz: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf069',
			  size: 50,
			  color: '#57169a'
			}
		  },
		  
		  orggov: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf19c',
			  size: 50,
			  color: 'blue'
			}
		  },
		  
		  orgnonprofit: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf069',
			  size: 50,
			  color: 'green'
			}
		  },
		  
		  
		  orgfaith: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf004',
			  size: 50,
			  color: 'cyan'
			}
		  },
		  
		  globe: {
			shape: 'icon',
			icon: {
			  face: 'Ionicons',
			  code: '\uf276',
			  size: 66,
			  color: '#6E6EFD'
			}
		  },
		  
		  marker: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf041',
			  size: 50,
			  color: '#FB7E81'
			}
		  },
		  
		  book: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf02d',
			  size: 50,
			  color: '#C2FABC'
			}
		  },
		  film: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf008',
			  size: 55,
			  color: '#6E6EFD'
			}
		  },
		  
		  
		  tags: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf02c',
			  size: 40,
			  color: 'lime'
			}
		  },
		  tag: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf02b',
			  size: 40,
			  color: 'lime'
			}
		  },
		  
		  projects: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf0ae',
			  size: 44,
			  color: '#800000'
			}
		  },
		  project: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf03a',
			  size: 40,
			  color: 'maroon'
			}
		  },
		  
		  bullseye: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf140',
			  size: 40,
			  color: 'red'
			}
		  },
		  puzzle: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf12e',
			  size: 40,
			  color: 'yellow'
			}
		  },
		  
		  cubes: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf1b3',
			  size: 44,
			  color: 'black'
			}
		  },
		  cube: {
			shape: 'icon',
			icon: {
			  face: 'FontAwesome',
			  code: '\uf1b2',
			  size: 40,
			  color: 'black'
			}
		  },
		}        
	};
	var network = new vis.Network(container, data, options);
	
	
	var nodesObject = nodes._data;
	var Nodes =[];
	for(var i in nodesObject) {
		if (nodesObject.hasOwnProperty(i)){
			Nodes.push(nodesObject[i]);
		}
	}	
	
	var edgesObject = edges._data;
	var Edges =[];
	for(var i in edgesObject) {
		if (edgesObject.hasOwnProperty(i)){
			Edges.push(edgesObject[i]);
		}
	}		
	 
	//  set initial nodes and edges count in title block
	document.getElementById('nodeCount').innerHTML = Nodes.length;
	document.getElementById('edgeCount').innerHTML = Edges.length;

	//  create filter checkbox for each unique group type
	var groupsList = [];
	for (var i = 0; i < Nodes.length; i++) {
		Nodes[i].hidden = false;
		if(groupsList.indexOf(Nodes[i].group) === -1) groupsList.push(Nodes[i].group);
	};

	for (var i = 0; i < groupsList.length; i++) {
		var div = document.createElement('div');
		var checkbox = document.createElement('input');
		checkbox.type = 'checkbox';
		checkbox.className = 'toggleOption';
		checkbox.value = groupsList[i];
		checkbox.id = groupsList[i];
		checkbox.checked = true;

		var label = document.createElement('label');
		label.htmlFor = groupsList[i];
		label.appendChild(document.createTextNode(groupsList[i]));

		document.getElementById('filterOption').appendChild(div);
		div.appendChild(checkbox);
		div.appendChild(label);
	};  

	//   control visibility of accordion views
	var acc = document.getElementsByClassName('accordion-trigger');
	for (var i = 0; i < acc.length; i++) {
		acc[i].onclick = function(){
			this.classList.toggle('accordion-trigger-active');
			this.nextElementSibling.classList.toggle('hidden');
		}
	};

	//  hide or display nodes and edges depending on filter selections
	var classname = document.getElementsByClassName('toggleOption');
	var filterToggle = function() {
		var filter = this.getAttribute('value');
		var visibleNodes = 0;
		for (var i = 0; i < Nodes.length; i++) {
			if (Nodes[i].group == filter) {
				if (this.checked && Nodes[i].hiddenByDegree !== true) {
					Nodes[i].hidden = false;
				}
				else {
					Nodes[i].hidden = true;
				}
				nodes.update({id:Nodes[i].id, hidden: Nodes[i].hidden});
			}
			if (Nodes[i].hidden === false) visibleNodes++;
		}
		document.getElementById('nodeCount').innerHTML = visibleNodes;
		toggleConnectedEdges();
	};
	for (var i = 0; i < classname.length; i++) {
		classname[i].addEventListener('click', filterToggle, false);
	}

	//  network graph click event
	var selectedNode = [];
	network.on("click", function(selected){
		var details = "";
		var nodeId = selected.nodes.toString();
		var edgeId = selected.edges.toString();
		
		selectedNode = [];
		selectedNode.push(selected.nodes);
		//  display node or edge data in the sidebar for selected element
		if(nodeId === "" && edgeId === "") {
			details = "Select a node or edge in the graph.";
			document.getElementById('separation').style.display = 'none';
			document.getElementById('degreesOfSelectedNode').style.display = 'none';
		}
		var focalPoint = (findObjectById(nodeId, Nodes) || findObjectById(edgeId, Edges));
		for(var property in focalPoint) {
			if (focalPoint.hasOwnProperty(property) && property !== 'hidden' && property !== 'hiddenByDegree') {
				details += (property + ": " + focalPoint[property] + "<br>");
			}
		}
		document.getElementById('propDetails').innerHTML = details;
		
		//  if a node is selected, hide any nodes outside the selected number N degrees
		if(nodeId) {
			hideNodesByDegree(nodeId);
			document.getElementById('separation').style.display = 'block';
			document.getElementById('degreesOfSelectedNode').style.display = 'block';				
		}
		//  clicking off the node will restore the complete graph
		else {
			for (var i = 0; i < Nodes.length; i++) {		
				if (document.getElementById(Nodes[i].group).checked === true) {
					Nodes[i].hiddenByDegree = false;
					Nodes[i].hidden = false;
					nodes.update({id:Nodes[i].id, hidden: false});
				}
			}
			document.getElementById('nodeCount').innerHTML = Nodes.length;
			toggleConnectedEdges();		
		}
		
		//  zoom in on selected node
		var moveToOptions = {
			scale: 1.05,              // scale to animate to  (Number)
			offset: {x:0, y:0},      // offset from the center in DOM pixels (Numbers)
			animation: {             // animation object, can also be Boolean
			  duration: 1000,                 // animation duration in milliseconds (Number)
			  easingFunction: "easeInOutQuad" // Animation easing function, available are:  linear, easeInQuad, easeOutQuad, easeInOutQuad,
			}                                   // easeInCubic, easeOutCubic, easeInOutCubic, easeInQuart, easeOutQuart, easeInOutQuart,
		}                                       // easeInQuint, easeOutQuint, easeInOutQuint
		if(nodeId) network.focus(nodeId, moveToOptions);
	});

	function findObjectById(objectId, objectArray){
		for (var i=0; i < objectArray.length; i++) {
			if (objectArray[i].id === objectId) {
				return objectArray[i];
			}
		}
	}

	var hideNodesByDegree = function(nodeId) {
		//  find the connected nodes within N degrees
		var connectedNodes = [];
		connectedNodes.push(nodeId);
		var degrees = document.getElementById('degreesOfSelectedNode').value;
		for(var i = 0; i < degrees; i++) {
			var nextDegreeNodes = [];
			for(var j = 0; j < connectedNodes.length; j++) {
				nextDegreeNodes.push(network.getConnectedNodes(connectedNodes[j]));
			}
			if (nextDegreeNodes[0] != "") {
				for(var k = 0; k < nextDegreeNodes.length; k++) {
					for(var l = 0; l < nextDegreeNodes[k].length; l++) {
						if(connectedNodes.indexOf(nextDegreeNodes[k][l]) === -1) connectedNodes.push(nextDegreeNodes[k][l]);
					}
				}
			}
		}
		//  hide all nodes outside N degrees and their connected edges
		var visibleNodes = 0;
		for (var i = 0; i < Nodes.length; i++) {	
			if (connectedNodes.indexOf(Nodes[i].id) !== -1) {
				if (document.getElementById(Nodes[i].group).checked === true) {
					Nodes[i].hiddenByDegree = false;
					Nodes[i].hidden = false;
				}
			}
			else {
				Nodes[i].hiddenByDegree = true;
				Nodes[i].hidden = true;
			}
			nodes.update({id:Nodes[i].id, hidden: Nodes[i].hidden});
			if (Nodes[i].hidden === false) visibleNodes++;
		}
		document.getElementById('nodeCount').innerHTML = visibleNodes;
		toggleConnectedEdges();
	}

	function toggleConnectedEdges() {
		var visibleEdges = 0;
		for (var x = 0; x < Edges.length; x++) {
			var toNode = findObjectById(Edges[x].to, Nodes) || false;
			var fromNode = findObjectById(Edges[x].from, Nodes) || false;
			if (toNode.hidden === true || fromNode.hidden === true) {
				Edges[x].hidden = true;
			}
			else {
				Edges[x].hidden = false;
				visibleEdges ++;
			}
			edges.update({id:Edges[x].id, hidden: Edges[x].hidden});
		}
		document.getElementById('edgeCount').innerHTML = visibleEdges;
	}
	
	changeDegrees = function(newValue) {
		hideNodesByDegree(selectedNode[0].toString());
		document.getElementById('separation').innerHTML = 'Degrees of Separation: ' + newValue;
	}  

</script>

</body>
</html>